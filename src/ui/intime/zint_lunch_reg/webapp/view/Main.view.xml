<mvc:View controllerName="intime.zint_lunch_reg.controller.Main"
    xmlns="sap.m"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:grid="sap.ui.layout.cssgrid"
    xmlns:layout="sap.ui.layout"
    xmlns:f="sap.f"
    xmlns:u="sap.ui.unified"
    xmlns:tnt="sap.tnt">
    <Page showFooter="{state>/adminMode}">
        <Toolbar class="sapUiSmallMargin"
            height="auto">
            <DatePicker width="20%"
                change="onDateChange"
                class="sapUiSmallMargin"
                value="{path:'date>/dateValue', type:'sap.ui.model.type.Date', formatOptions: { style: 'medium', strictParsing: true}}"
                id="DP1" />

            <ToolbarSpacer/>


            <Button text="Администратор"
                press="onGoToAdminModeButtonPress"
                type="Transparent"
                class="sapUiSmallMargin"
                ariaLabelledBy="editButtonLabel"/>
        </Toolbar>


        <VBox id="dishContainer"
            items="{dish>/dishType}">

            <Panel backgroundDesign="Transparent"
                width="100%">

                <headerToolbar>
                    <Toolbar height="3rem">
                        <Title text="{dish>typeText}" />
                        <ToolbarSpacer />
                        <Button icon="sap-icon://add"
                            visible="{state>/adminMode}"
                            press="onAddPress"/>
                    </Toolbar>
                </headerToolbar>

                <f:GridList items="{/ZSNN_EMP_MENU}"
                    select="onSelectDish"
                    mode="MultiSelect">
                    <f:GridListItem 
                        id = "GridListItem"
                        selected="{DishChoosen}"
                        type="{= ${state>/adminMode} ? 'Detail' : 'Inactive' }"
                        detailPress="onDetailPress">

                        <VBox class="sapUiSmallMargin">

                            <HBox>

                                <f:Avatar src="{/Speakers}"
                                    displaySize="S"
                                    displayShape="Square"
                                    showBorder="true">
                                </f:Avatar>

                                <u:FileUploader
                                    class="sapUiSmallMarginBegin"
                                    visible="{state>/adminMode}"
                                    name="myFileUpload"
                                    fileType="jpg,png,jpeg,ico"
                                    change="onFileUploadChange"/>

                            </HBox>
                            <VBox class="sapUiSmallMargin">
                                <Title text="{DISH_DESCR}"
                                    wrapping="true" />
                                <Label text="{DISH_COMPOSITION}"
                                    wrapping="true" />
                            </VBox>
                        </VBox>

                        <OverflowToolbar visible="{state>/adminMode}">

                            <ToolbarSpacer />
                            <Button icon="sap-icon://delete"
                                press="onDeleteDishButtonPress"
                                type="Reject" />
                        </OverflowToolbar>

                    </f:GridListItem>
                </f:GridList>
            </Panel>

        </VBox>

        <footer>
            <OverflowToolbar>
                <ToolbarSpacer/>
                <!-- <Button text="Применить" press="onApplyButtonPress" type="Accept" /> -->
                <Button text="Сохранить"
                    press="onSaveButtonPress"
                    type="Accept" />
                <Button text="Отменить"
                    press="onRejectButtonPress"
                    type="Reject" />
            </OverflowToolbar>
        </footer>

    </Page>
</mvc:View>