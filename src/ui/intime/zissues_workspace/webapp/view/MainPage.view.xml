<mvc:View controllerName="intime.zissues_workspace.controller.Main"
  xmlns="sap.m"
  xmlns:mvc="sap.ui.core.mvc"
  xmlns:grid="sap.ui.layout.cssgrid"
  xmlns:layout="sap.ui.layout"
  xmlns:f="sap.f"
  xmlns:sv="sap.ui.comp.smartvariants"
  xmlns:smartFilterBar="sap.ui.comp.smartfilterbar"
  xmlns:dnd="sap.ui.core.dnd"
  xmlns:control="intime.zissues_workspace.controls"
  xmlns:dnd-grid="sap.f.dnd">


  <f:DynamicPage id="dynamicPageId">
    <f:title>
      <f:DynamicPageTitle>
        <f:heading>
          <sv:SmartVariantManagement id="__SVM01"
            persistencyKey="fiori.test.application2.view.S4"
            showShare="true"
            showExecuteOnSelection="true"
            entitySet="ZSNN_INTIME_TASK"/>
        </f:heading>

        <f:content>
          <OverflowToolbar>
          </OverflowToolbar>
        </f:content>

      </f:DynamicPageTitle>

    </f:title>

    <f:header>
      <f:DynamicPageHeader>
        <smartFilterBar:SmartFilterBar id="issueSmartFilter"
          considerSelectionVariants="true"
          entitySet="ZSNN_INTIME_TASK"
          showClearButton="true">

        </smartFilterBar:SmartFilterBar>

      </f:DynamicPageHeader>
    </f:header>

    <f:content>
      <f:GridList id="statusGridList"
        showNoData="false"
        growingDirection="Upwards"
        items="{/ZBNN_TASK_STATUS}">

        <!-- <f:customLayout>
          <grid:GridBoxLayout boxWidth="20em" />
        </f:customLayout> -->

        <control:GridListStatus>

          <control:dragDropConfig>
            <dnd:DropInfo drop="onChangeTaskStatusDrop" />
          </control:dragDropConfig>

          <VBox height="100%"
            direction="Column"
            alignContent="Start"
            justifyContent="Start">
            <!-- <layoutData>
              <FlexItemData growFactor="1" shrinkFactor="0" />
            </layoutData> -->

            <HBox alignItems="Start"
              justifyContent="SpaceBetween">
              <VBox class= "sapUiSmallMargin">
                <Title text="{TaskStatusText}"
                  wrapping="true" />
              </VBox>

              <HBox class="sapUiTinyMargin">
                <Button icon="sap-icon://add"
                  visible="{CreateTaskEnabled}"
                  press="onNewTaskButtonPress"/>
              </HBox>
            </HBox>
            <!-- <Panel/> -->
            <f:GridList items="{to_Task}"
              showNoData="false"
              growingDirection="Upwards">

              <control:GridListTask>

                <control:dragDropConfig>
                  <dnd:DragInfo />
                </control:dragDropConfig>

                <VBox height="100%"
                  justifyContent="SpaceBetween">
                  <layoutData>
                    <FlexItemData growFactor="1"
                      shrinkFactor="0" />
                  </layoutData>

                  <VBox>
                    <HBox alignItems="Start"
                      justifyContent="SpaceBetween">
                      <ObjectIdentifier title="{Name}"
                        text="{ProjectStageName}({ProjectName})"
                        titleActive="true"
                        titlePress="onTaskTitlePress"
                        class="sapUiTinyMargin"/>
                      <HBox class="sapUiTinyMargin">
                        <Button icon="sap-icon://arrow-bottom"
                          press="onShowSubTaskListButtonPress"/>
                        <!-- <Button icon="sap-icon://add"/> -->
                        <Button icon="sap-icon://delete"
                          press="onDeleteTaskButtonPress"/>
                      </HBox>

                    </HBox>

                    <Text text="{path : 'EndDate', formatter:'.commonFormatter.formatDateTimeToShortDate'}"
                      class="sapUiTinyMarginBegin"/>

                  </VBox>

                  <List items="{to_SubTask}"
                    visible="false">
                    <items>
                      <StandardListItem title="{Name}"
                        info="{StatusText}"/>
                    </items>
                  </List>
                  <!-- <Title text="{Name}" wrapping="true" class="sapUiSmallMargin"/> -->


                </VBox>

              </control:GridListTask>
            </f:GridList>

          </VBox>
        </control:GridListStatus>
      </f:GridList>

    </f:content>
    <!-- DynamicPage Footer -->
    <f:footer>
      <OverflowToolbar>
      </OverflowToolbar>
    </f:footer>
  </f:DynamicPage>

</mvc:View>